function showExtend(){""==$("#queryDate1").val()&&""!=$("#queryDate2").val()||""==$("#queryDate2").val()&&""!=$("#queryDate1").val()?$("#extendOption li.isExtend").removeClass("disabled"):$("#extendOption li.isExtend").removeClass("active").addClass("disabled"),delete extendSearch.isExtend}function delValue(a){var b=$(a),c=b.parent().find(".active").attr("id");$("#"+c).val(""),"airline_num"!=c&&(searchCode[c].name="",searchCode[c].code=null),b.hide(),$(".tips-erro").hide()}function delDate(a){var b=$(a),c=b.parent().find(".date-picker");c.val(""),"queryDate1"==c.attr("id")&&($("#queryDate2").datetimepicker("setStartDate","2001-01-01"),$("#queryDate2").datetimepicker("setEndDate","2020-01-01")),showExtend(),b.hide()}var selecttype={depDom:"route_dep",arrDom:"route_arr",arrType:1,depType:1,focus:function(a){var b=$(a),c=b.parent();c.addClass("cur"),c.find(".select-toggle").show("slow")},blur:function(a){var b=$(a),c=b.parent();c.removeClass("cur"),c.parent().find(".select-toggle").hide("slow")},click:function(a){var b=$(a);if(0==b.hasClass("disabled")){var c=b.attr("d"),d=b.attr("t"),e=b.parent().parent().parent(),f=e.siblings();e.find(".selecttype").val(b.text()),e.find(".selecttype").attr("d",c),e.find(".selecttype").attr("k",d),$("#"+d).addClass("active").siblings().removeClass("active"),""!=$("#"+d).val()?$("#"+d).parent().find(".icon-shanchu").show():$("#"+d).parent().find(".icon-shanchu").hide(),-1!=d.indexOf("dep")&&(this.depDom=d,this.depType=c),-1!=d.indexOf("arr")&&(this.arrDom=d,this.arrType=c),f.find(".select-toggle li").removeClass("disabled"),"2"==c?f.find(".select-toggle li").eq(2).addClass("disabled"):"3"==c&&(f.find(".select-toggle li").eq(1).addClass("disabled"),f.find(".select-toggle li").eq(2).addClass("disabled")),"出发机场"==$("#depType").val()&&"到达机场"==$("#arrType").val()?($("#ishowConnect").show(),$("#extendOption .isConnect").removeClass("disabled")):($("#ishowConnect").hide(),$("#extendOption .isConnect").removeClass("active").addClass("disabled"),delete extendSearch.isConnect),$(".FilterBox,.tips-erro").hide()}return!1},isShowConennt:function(){if("1"==selecttype.depType&&"1"==selecttype.arrType){var a=$(".select-city .select-type-md input"),b=0;$(a).each(function(){$(this).hasClass("active")&&""!=$(this).val()&&b++}),b<2?($("#extendOption .isConnect").removeClass("active").addClass("disabled"),delete extendSearch.isConnect):$("#extendOption .isConnect").removeClass("disabled")}}};!function(){var a=location.search;if(-1!=a.indexOf("?")){var b=a.substr(1);strs=b.split("="),strs=strs[1].substring(12,0),$.ajax({type:"POST",url:baseUrl+"WTEiPj4kQR/Ls3BeKEFtkrcAwctbiseudObS/bVwWlONw0lGby1WGRn",dataType:"json",data:{_____:strs},success:function(a){0==a.code?(searchObj=a.data,setTimeout(function(){getSearchResult.get(),$("#nav-ontime").removeClass("active")},2e3),bShare.recover()):setTimeout(function(){$("#nav-ontime").trigger("click")},2e3)}})}else setTimeout(function(){$("#nav-ontime").trigger("click")},2e3)}();var bShare={text:"Variflight飞常准航线图实时航线",url:"http://map.variflight.com/",dep:{1:"route_dep",2:"area_dep",3:"state_dep"},arr:{1:"route_arr",2:"area_arr",3:"state_arr"},open:function(){$("body").append('<div class="modal-bg" id="showMoal"></div>'),"{}"===JSON.stringify(searchObj)?(bShare.url=window.location.hostname,$("#shareurl").val(bShare.url),bShare.text="Variflight飞常准航线图实时航线",$("#shareBox,#showMoal").show()):$.ajax({type:"POST",url:baseUrl+"WTEiPj4kQR/Ls3BeKEFtkrcAwctbiseudObS/oGHQjepPBul2",dataType:"json",data:searchObj,success:function(a){0==a.code&&(bShare.url=window.location.hostname+"?_s="+a.data.link,bShare.text=a.data.title,$("#shareurl").val(bShare.url),$("#shareBox,#showMoal").show())}})},close:function(){$("#showMoal").remove(),$("#shareBox").hide()},copy:function(){$("#shareurl").select(),document.execCommand("Copy"),loading.tipAlert("复制成功")},recover:function(){if(searchObj.depType&&(selecttype.click($("."+this.dep[searchObj.depType]+"Li")),"1"==searchObj.depType?$("#"+this.dep[searchObj.depType]).val(geoCoordMap[searchObj.dep][2]):$("#"+this.dep[searchObj.depType]).val(SateCode[searchObj.dep]),searchCode[this.dep[searchObj.depType]].code=searchObj.dep),searchObj.arrType&&(selecttype.click($("."+this.arr[searchObj.arrType]+"Li")),"1"==searchObj.arrType?$("#"+this.arr[searchObj.arrType]).val(geoCoordMap[searchObj.arr][2]):$("#"+this.arr[searchObj.arrType]).val(SateCode[searchObj.arr]),searchCode[this.arr[searchObj.arrType]].code=searchObj.arr),searchObj.connect&&($("#route_connect").val(geoCoordMap[searchObj.connect][2]),searchCode.route_connect.code=searchObj.connect),searchObj.queryDate1&&$("#queryDate1").val(searchObj.queryDate1),searchObj.queryDate2&&$("#queryDate2").val(searchObj.queryDate2),searchObj.aircode&&($("#airline_num").val(aName[searchObj.aircode]),aircode=searchObj.aircode),""!=searchObj.union){$("#unionItem").addClass("open-item");var a=searchObj.union.split(",");Uions.unionItem.length=0,a.map(function(a){advanceOption.Uionclick($("."+a))}),advanceOption.selectTitle($(".select-title"))}0==searchObj.isStop&&$("#extendOption li").eq(0).trigger("click"),1==searchObj.isShare&&$("#extendOption li").eq(1).trigger("click"),0==searchObj.isDomestic&&$("#extendOption li").eq(2).trigger("click"),0==searchObj.isCross&&$("#extendOption li").eq(3).trigger("click"),1==searchObj.isC3&&$("#extendOption li").eq(4).trigger("click"),1==searchObj.isNC&&$("#extendOption li").eq(5).trigger("click"),1==searchObj.isCX&&$("#extendOption li").eq(6).trigger("click"),1==searchObj.isConnect&&$("#extendOption li").eq(7).trigger("click"),$(".main-nav-bar li").eq(1).trigger("click")}},ableHeight;!function(){var a=$(window).height(),b=a-$(".search-logo").height()-5*$("#searchBtn").height();ableHeight=a-250,b<$("#searchBox").height()&&($("#searchBox").slimscroll({height:b,size:"3px"}),$(".mstlye-items").slimscroll({height:b,size:"3px"}))}(),$(".main-nav-bar li,.icon-left,#mainNav li").click(function(){var a=$(this),b=a.attr("data-id");$("#"+b).hasClass("move-left")?$("#"+b).removeClass("move-left"):($(".move-box").removeClass("move-left"),$("#"+b).addClass("move-left"))}),$("#change_btn").on("click",function(){if(""!=$("#"+selecttype.depDom).val()||""!=$("#"+selecttype.arrDom).val()){if(selecttype.depType!=selecttype.arrType){var a=selecttype.depDom,b=searchCode[selecttype.depDom].code,c=searchCode[selecttype.depDom].name;selecttype.depDom=selecttype.arrDom.split("_")[0]+"_dep",searchCode[selecttype.depDom].code=searchCode[selecttype.arrDom].code,searchCode[selecttype.depDom].name=searchCode[selecttype.arrDom].name,selecttype.arrDom=a.split("_")[0]+"_arr",searchCode[selecttype.arrDom].code=b,searchCode[selecttype.arrDom].name=c;var d=selecttype.depType;selecttype.depType=selecttype.arrType,selecttype.arrType=d,$("#"+selecttype.depDom).addClass("active").siblings().removeClass("active"),$("#"+selecttype.arrDom).addClass("active").siblings().removeClass("active"),$("#depType").attr({d:selecttype.depType,k:selecttype.depDom}),$("#depType").val(searchCode[selecttype.depDom].text),$("#arrType").attr({d:selecttype.arrType,k:selecttype.arrDom}),$("#arrType").val(searchCode[selecttype.arrDom].text)}else{var b=searchCode[selecttype.depDom].code,c=searchCode[selecttype.depDom].name;searchCode[selecttype.depDom].code=searchCode[selecttype.arrDom].code,searchCode[selecttype.depDom].name=searchCode[selecttype.arrDom].name,searchCode[selecttype.arrDom].code=b,searchCode[selecttype.arrDom].name=c}$("#"+selecttype.depDom).val(searchCode[selecttype.depDom].name),$("#"+selecttype.arrDom).val(searchCode[selecttype.arrDom].name),""!=$("#"+selecttype.depDom).val()?$("#"+selecttype.depDom).parent().find(".icon-shanchu").show():$("#"+selecttype.depDom).parent().find(".icon-shanchu").hide(),""!=$("#"+selecttype.arrDom).val()?$("#"+selecttype.arrDom).parent().find(".icon-shanchu").show():$("#"+selecttype.arrDom).parent().find(".icon-shanchu").hide()}});var advanceOption={toggle:function(a){$(a).parent().find(".select-items").toggle("slow")},Uionclick:function(a){var b=$(a),c=b.attr("key");if(b.hasClass("check-ok")){var d=$.inArray(c,Uions.unionItem);Uions.unionItem.splice(d,1),b.removeClass("check-ok")}else b.addClass("check-ok"),Uions.unionItem.push(c)},selectTitle:function(a){var b=$(a),c=b.parent();c.hasClass("open-item")?(c.removeClass("open-item"),Uions.unionItem.length>0?($("#unionItem .item-num").text("(已选"+Uions.unionItem.length+"个)"),$("#unionItem").animate({width:"90%"}),$("#unionItem .icon-shanchu").animate({opacity:"1"})):($("#unionItem .item-num").text(""),$("#unionItem").animate({width:"100%"}),$("#unionItem .icon-shanchu").animate({opacity:"0"}))):c.addClass("open-item")},delete:function(){Uions.unionItem=[],$("#unionItem .item-list li").removeClass("check-ok"),$("#unionItem .item-num").text(""),$("#unionItem").animate({width:"100%"}),$("#unionItem .icon-shanchu").animate({opacity:"0"})}};$("#map_container").click(function(a){$(".move-box").removeClass("move-left"),$(".FilterBox,#tip-box").hide(),$(".header").show()}),$(".FilterBox").on("click",".filterLi",function(){var a=$(this),b=a.attr("key"),c=a.attr("id");$("#"+b).find("."+c).show().siblings().hide(),a.addClass("cur").siblings().removeClass("cur")}),$("#changeSkin").click(function(a){$.ajax({type:"POST",url:"/",dataType:"json",data:{changeSkin:1},success:function(a){location.reload()}})}),$("#flightHeader li").click(function(a){var b=$(this),c=b.attr("t");b.addClass("active").siblings().removeClass("active"),$("#"+c+"Box").addClass("active").siblings().removeClass("active")}),$("#extendOption li").click(function(){var a=$(this),b=a.attr("d"),c=a.attr("k");a.hasClass("active")?(a.removeClass("active"),delete extendSearch[c]):0==a.hasClass("disabled")&&(a.hasClass("extend2")?($("#extendOption li.extend1").removeClass("active"),delete extendSearch.isDomestic,delete extendSearch.isCross):a.hasClass("extend1")&&($("#extendOption li.extend2").removeClass("active"),delete extendSearch.isCX,delete extendSearch.isC3,delete extendSearch.isNC),extendSearch[c]=b,a.addClass("active"))}),$(".date-picker").datetimepicker({language:"zh-CN",format:"yyyy-mm-dd",autoclose:1,todayBtn:!0,startView:2,minView:2,forceParse:0}).on("changeDate",function(a){showExtend();var b=a.date.valueOf(),c=a.delegateTarget.id,d=$("#"+c).parent().find(".icon-shanchu");if("queryDate1"==c){$("#queryDate2").datetimepicker("setStartDate",$("#queryDate1").val()),$("#queryDate2").datetimepicker("setEndDate","2020-01-01");var e=Date.parse(new Date),f=e-b;if($("#queryDate1").val()>$("#queryDate2").val()&&""!=$("#queryDate2").val()&&$("#queryDate2").val($("#queryDate1").val()),f>2592e6){var g=b+2592e6;g=new Date(parseInt(g));g=g.getFullYear()+"-"+(g.getMonth()+1<10?"0"+(g.getMonth()+1):g.getMonth()+1)+"-"+(g.getDate()<10?"0"+g.getDate():g.getDate()),$("#queryDate2").datetimepicker("setEndDate",g),""!=$("#queryDate2").val()&&$("#queryDate2").val(g)}$("#queryDate2").datetimepicker("update")}d.show()}),$(".color-picker").each(function(){$(this).minicolors({control:$(this).attr("data-control")||"hue",defaultValue:$(this).attr("data-defaultValue")||"",inline:"true"===$(this).attr("data-inline"),letterCase:$(this).attr("data-letterCase")||"lowercase",opacity:$(this).attr("data-opacity"),position:$(this).attr("data-position")||"bottom right",change:function(a,b){try{log=a||"transparent",b&&(log+=", "+b)}catch(a){}},theme:"default"})}),$("#settingBox").click(function(){return $(".nav-ontime").hasClass("active")?(loading.tipAlert("全球实时航线暂不支持设置"),!1):1==SettingUtil.islm?(loading.tipAlert("纯联盟暂时不支持设置"),!1):void SettingUtil.show()}),$("#fullscreen").click(function(){$(".gm-china").find(".gm-fullscreen-control").trigger("click")});var SettingUtil={islm:!1,curType:0,changeTab:function(a){var b=$(a);if(0==b.hasClass("cur")){var c=b.attr("data");b.addClass("cur").siblings().removeClass("cur"),$(".tab-"+c).addClass("cur").siblings().removeClass("cur")}},changeLineStyle:function(a){var b=$(a),c=b.val();$(".lineS").removeClass("cur"),$(".lineS-"+c).addClass("cur")},reset:function(){null==map?(SettingConfig={lineStyle:"solid",lineCurvature:"0.6",waterColor:"#232931",landColor:"#303845",boundaryColor:"#232931"},lineColor={0:{1:"#f4e925",2:"#50a0eb",3:"#405a86"},1:{0:"#f4e925",1:"#50a0eb"},2:{0:"#f4e925",1:"#c00",2:"#50a0eb"},3:{0:"#f4e925",1:"#50a0eb"},100:{0:"#f4e925",1:"#c00",2:"#c00",2:"#c00"}}):(SettingConfig={lineStyle:"solid",lineCurvature:"0.5",waterColor:"#fff",landColor:"#e6e6e6",boundaryColor:"#d1d1d1"},lineColor={0:{1:"#c00",2:"#50a0eb",3:"transparent"},1:{0:"#c00",1:"#50a0eb"},2:{0:"#c00",1:"#c00",2:"#50a0eb"},3:{0:"#c00",1:"#50a0eb"},100:{0:"#000",1:"#000",2:"#000",3:"#000"}}),$("#color-water").minicolors("value",SettingConfig.waterColor),$("#color-land").minicolors("value",SettingConfig.landColor),$("#color-mland").minicolors("value",SettingConfig.boundaryColor),$("#lineStyle").val(SettingConfig.lineStyle),$("#lineCurvature").val(SettingConfig.lineCurvature),$("#lineSelect").val("0"),SettingUtil.curType=0,$("#lineSelect").trigger("change");for(key in lineColor){var a=lineColor[key];for(color in a)$(".lineS-"+key).find(".color-picker"+color).minicolors("value",a[color])}this.sure()},sure:function(){SettingUtil.curType=$("#lineSelect").val(),SettingConfig.waterColor=$("#color-water").val(),SettingConfig.landColor=$("#color-land").val(),SettingConfig.boundaryColor=$("#color-mland").val(),SettingConfig.lineStyle=$("#lineStyle").val(),SettingConfig.lineCurvature=$("#lineCurvature").val(),null!=map&&map.setOptions({styles:GoogleUtil.mapStyle(SettingConfig.waterColor,SettingConfig.landColor,SettingConfig.boundaryColor)});var a="";$(".tab-line li.cur").each(function(){var b=$(this),c=b.find("input").val(),d=b.attr("c");b.attr("k");lineColor[SettingUtil.curType][d]=c,a+='<p><em style="background-color:'+c+'"></em><span>'+b.find("label").text()+"</span></p>"}),$(".fmap-info .line-info").empty().html(a),this.close(),loading.tipAlert("设置应用中,请稍后..."),GoogleUtil.tool.clearMap(),GoogleUtil.drawMap(getSearchResult.data)},show:function(){$("#settingTool,#showMoal").show()},close:function(){$("#settingTool,#showMoal").hide()},showIntro:function(a){var b=$(a),c=b.parent();b.hasClass("fmap-info-show")?(c.css("right","-230px"),b.removeClass("fmap-info-show")):(c.css("right","0"),b.addClass("fmap-info-show"))}},geoCoord={coord:function(a){return!!geoCoordMap[a]&&geoCoordMap[a]},lng:function(a){return this.coord(a)[0]},lat:function(a){return this.coord(a)[1]},name:function(a){return this.coord(a)[2]},level:function(a){return this.coord(a)[3]},state:function(a){return this.coord(a)[4]}};window.FlightInfo={},FlightInfo={isRecommend:!0,flightData:{},fittler:{ignore:[],zf:{airport:[]},jt:{airport:[]},zz:{airport:[]}},show:function(){$("#flightBox").toggle()},hide:function(){$("#flightBox").hide()},dataPicker:function(a){var b=$(a),c=b.attr("key");b.parents(".flight-date").find(".date-table-"+c).addClass("active").siblings().removeClass("active")},fittlerAirport:function(a){var b=$(a),c=b.attr("d"),d=b.attr("k"),e=$("#"+d+"Box").find(".flightline-list"),f=this.fittler[d].airport;if(0==b.hasClass("active"))b.addClass("active"),0==f.length?e.find(".flightline-item0").not("."+c+"-item0").hide():e.find("."+c+"-item0").show(),f.push(c);else{b.removeClass("active"),e.find("."+c+"-item0").hide();var g=$.inArray(c,f);f.splice(g,1),0==f.length&&e.find(".flightline-item0").show()}},getFirst:function(){var a=this;a.fittler.ignore=[],a.fittler.zf.airport=[],a.fittler.jt.airport=[],a.fittler.zz.airport=[],a.flightData=searchObj,a.fittler.ignore.push(a.flightData.dep,a.flightData.arr,a.flightData.connect),loading.ajax("de1",a.flightData,function(b){0!=b.length?($(".filter-ul").empty().html("<ul></ul>"),a.firstList(b)):loading.errAlert(loading.msg.warning)})},getSecond:function(a){var b=this,c=$(a),d=c.attr("k"),e=$("#"+d+"-item1");if(""==e.text()){var f=c.attr("dep"),g=c.attr("arr"),h=c.attr("stop"),i=1,j={};for(var k in b.flightData)j[k]=b.flightData[k];j.dep=f,j.arr=g,delete j.connect,"undefined"!=h&&h&&(j.isStop=1,j.stops=h,i=2);var l="de2";c.hasClass("vl-route")&&(l+="x"),loading.ajax(l,j,function(a){if(0!=a.length){if(c.hasClass("vl-route"))var d=b.secondListVL(a);else var d=b.secondList(a,i);e.html(d)}else loading.errAlert(loading.msg.warning)},1),e.show()}else e.toggle()},getThird:function(a){var b=this,c=$(a),d=c.attr("k");if(d&&"l"==d)loading.tipAlert("该航班为缺失航班暂无航班班期");else{var e=c.attr("id"),f=$("#"+e+"-date");if(""!=f.text())f.toggle();else{var g=(c.attr("dep"),c.attr("arr"),c.attr("n")),h=c.find(".fno").text(),i={fno:h};for(var j in b.flightData)i[j]=b.flightData[j];if(void 0==g){var k=[];k.push(c.parent().attr("dep"),c.parent().attr("arr")),i.nodes=k.join(",");var l=c.find(".dtime").text();i.deptimes=l.substr(0,5),i.arrtimes=c.attr("at")}else i.nodes=g,i.deptimes=c.attr("dt"),i.arrtimes=c.attr("at");""!=c.attr("share")&&(i.shareExe=c.attr("share"),i.isShare=1);var m="de3";d&&(m+="x"),loading.ajax(m,i,function(a){if(0!=a.length){var c=b.thirdList(a);f.empty().html(c).css("height","300px")}else loading.errAlert(loading.msg.warning)}),f.show()}}},firstList:function(a){var b=!1;$(".fitem-info").find(".flightline-list").empty();for(var c in a){var d=a[c],e="",f=[],g="<ul>",h=d.length;if(h>0){0==b&&($("#flightHeader").find("."+c+"-li").trigger("click"),b=!0);for(var i=0;i<h;i++){var j=d[i],k=j[1],l=j[2];if(geoCoord.name(k)&&geoCoord.name(l))if(-1==$.inArray(k,f)&&-1==$.inArray(k,this.fittler.ignore)&&(f.push(k),g+='<li d="'+k+'"  k="'+c+'" onclick="FlightInfo.fittlerAirport(this)">'+k+"/"+geoCoord.name(k)+"</li>"),-1==$.inArray(l,f)&&-1==$.inArray(l,this.fittler.ignore)&&(f.push(l),g+='<li d="'+l+'"  k="'+c+'"  onclick="FlightInfo.fittlerAirport(this)">'+l+"/"+geoCoord.name(l)+"</li>"),"jt"==c){e+='<div class="flightline-item0 '+k+"-item0 "+l+"-item0";for(var m in j[4]){var n=j[4][m];e+=" "+n+"-item0",-1==$.inArray(n,f)&&this.flightData.dep&&this.flightData.arr&&(f.push(n),g+='<li d="'+n+'"  k="'+c+'" onclick="FlightInfo.fittlerAirport(this)">'+n+"/"+geoCoord.name(n)+"</li>")}e+='"><div class="flightline-item0-box" onclick="FlightInfo.getSecond(this)"  k="'+j[0]+'" dep="'+k+'"  arr="'+l+'" stop="'+j[4]+'">',e+='<div class="dep-name fl txg-l"><span class="code0">'+k+'</span><span class="name0"  title="'+geoCoord.name(k)+'">'+geoCoord.name(k)+"</span></div>",e+='<div class="arr-name fr txg-r"><span class="code0">'+l+'</span><span class="name0" title="'+geoCoord.name(l)+'">'+geoCoord.name(l)+"</span></div>",e+='<div class="stop-line txg-c">经:';for(var o in j[4]){var n=j[4][o],p=geoCoord.name(n);e+=n+"("+p+")"}e+='</div><div class="content-center-more txg-c">'+j[3]+"公里</div>",e+=' <div class="clear"></div></div>',e+='<div class="flightline-item1-box" id="'+j[0]+'-item1"  dep="'+k+'" arr="'+n+'"></div></div>'}else if("zz"==c){var n=j[4][0];-1==$.inArray(n,f)&&-1==$.inArray(n,this.fittler.ignore)&&(f.push(n),g+='<li d="'+n+'"  k="'+c+'" onclick="FlightInfo.fittlerAirport(this)">'+n+"/"+geoCoord.name(n)+"</li>");var p=geoCoord.name(n);e+='<div class="flightline-item0 '+k+"-item0 "+l+"-item0 "+n+'-item0">',e+='<div class="flightline-item0-box">',e+='<div class="dep-name fl txg-l"><span class="code0">'+k+'</span><span class="name0"  title="'+geoCoord.name(k)+'">'+geoCoord.name(k)+"</span></div>",e+='<div class="arr-name fr txg-r"><span class="code0">'+l+'</span><span class="name0" title="'+geoCoord.name(l)+'">'+geoCoord.name(l)+"</span></div>",e+='<div class="stop-line txg-c">转:'+n+"("+p+")",e+='</div><div class="content-center-more txg-c">'+j[3]+"公里</div>",e+=' <div class="clear"></div></div>',1==this.isRecommend&&(e+='<div class="flight-recommend" onclick="FlightInfo.getRecommend(this)" d="'+k+'" a="'+l+'" s="'+n+'"><div class="recommend-title">航班推荐 (最早到达)</div><div class="recommend-route"></div></div>'),e+='<div class="flightline-itemzz-box" id="'+j[0]+'one"><p class="flightline-itemzz-p"  d="'+j[0]+'one" dep="'+k+'"  arr="'+n+'" onclick="FlightInfo.getFristConent(this)"',this.flightData.dep==k&&n==this.flightData.connect&&this.flightData.isConnect?e+='c="1"':e+='c="0"',e+="><span>第一程</span>"+k+'(<i class="short-name" title="'+geoCoord.name(k)+'">'+geoCoord.name(k)+'</i>)<em class="line"></em>'+n+'(<i class="short-name" title="'+geoCoord.name(n)+'">'+geoCoord.name(n)+'</i>)</p><div class="flightline-itemzz2-box"></div></div>',e+='<div class="flightline-itemzz-box" id="'+j[0]+'two" ><p  class="flightline-itemzz-p" d="'+j[0]+'two" dep="'+n+'"  arr="'+l+'" onclick="FlightInfo.getFristConent(this)"',this.flightData.arr==l&&n==this.flightData.connect&&this.flightData.isConnect?e+='c="1"':e+='c="0"',e+="><span>第二程</span>"+n+'(<i class="short-name" title="'+geoCoord.name(n)+'">'+geoCoord.name(n)+'</i>)<em class="line"></em>'+l+'(<i class="short-name" title="'+geoCoord.name(l)+'">'+geoCoord.name(l)+'</i>)</p><div class="flightline-itemzz2-box"></div></div>',e+="</div>"}else e+='<div class="flightline-item0 '+k+"-item0 "+l+'-item0 "><div class="flightline-item0-box" onclick="FlightInfo.getSecond(this)" dep="'+k+'"  arr="'+l+'" k="'+j[0]+'">',e+='<div class="dep-name fl txg-l"><span class="code0">'+k+'</span><span class="name0" title="'+geoCoord.name(k)+'">'+geoCoord.name(k)+"</span></div>",e+='<div class="arr-name fr txg-r"><span class="code0">'+l+'</span><span class="name0" title="'+geoCoord.name(l)+'">'+geoCoord.name(l)+"</span></div>",e+=' <div class="content-center txg-c">'+j[3]+"公里</div>",e+=' <div class="clear"></div></div>',e+='<div class="flightline-item1-box" id="'+j[0]+'-item1" dep="'+k+'" arr="'+l+'"></div></div>'}$("#"+c+"Box").removeClass("nodata"),$("#"+c+"Box").find(".flightline-list").empty().html(e),$("#"+c+"Box").find(".flightline-list").slimscroll({height:ableHeight,size:"5px",wheelStep:30}),"<ul>"!=g&&(g+=" </ul>",$("#"+c+"Box").find(".filter-airport .filter-ul").empty().html(g),$("#"+c+"Box").find(".filter-airport ul").slimscroll({height:"200px",size:"3px"}))}}},secondList:function(a,b){for(var c="",d=0;d<a.length;d++){var e=a[d],f="";if(d%2==0&&(f="even"),"1"==b)c+='<div class="flightline-item1-item '+f+" pure"+e[6]+'"  id="'+e[0]+'"  onclick="FlightInfo.getThird(this)"  share="'+e[7]+'" at="'+e[2][1]+'" ><span class="fno">'+e[1]+"</span>",c+='<span class="dtime">'+e[2][0]+"</span>",c+='<span class="line"><em>'+e[4]+"小时"+e[5]+"分钟<br/>",""!=e[7]&&(c+="共享"+e[7]),c+='</em></span><span class="dtime">'+e[2][1],e[3]>0?c+='<i class="plus">(+'+e[3]+")</i>":e[3]<0&&(c+='<i class="plus">('+e[3]+")</i>"),c+='</span></div><div class="flight-date  '+f+' " id="'+e[0]+'-date"></div>';else{var g=e[2],h=e[3],i=e[4],j=e[5],k=e[6],l=i.length-1;c+='<div class="flightline-item1-item '+f+" pure"+e[9]+'"  id="'+e[0]+'"  onclick="FlightInfo.getThird(this)"  dt="'+h.join(",")+'" at="'+i.join(",")+'" n="'+g.join(",")+'"   share="'+e[10]+'"><span class="fno">'+e[1]+"</span>",c+='<span class="dtime">'+e[3][0]+"</span>",c+='<span class="line"><em>'+e[7]+"小时"+e[8]+"分钟<br/>",e[10]&&(c+="共享"+e[10]);var m=58*g.length;c+='</em><div class="route-line" style="width:'+m+"px;left:-"+(m-100)/2+'px">';for(var n=0;n<g.length;n++)c+='<p><i class="code" title="'+geoCoord.name(g[n])+'">'+g[n]+"</i>",n<g.length-1&&(c+=0==n?'<i class="time">'+h[n]:'<i class="time">'+i[n-1],j[n]>0?c+="+"+j[n]:j[n]<0&&(c+=j[n]),c+="</i>"),0!=n&&(n==g.length-1?c+='<i class="time">'+i[n-1]:c+='<i class="time">'+h[n],0!=k[n-1]?c+="+"+k[n-1]:k[n-1]<0&&(c+=k[n-1]),c+="</i>"),c+="</p>";c+="</div></span>",c+='</span><span class="dtime">'+e[4][l],e[6][l]>0?c+='<i class="plus">(+'+e[6][l]+")</i>":e[6][l]<0&&(c+='<i class="plus">('+e[6][l]+")</i>"),c+='</span></div><div class="flight-date  '+f+' " id="'+e[0]+'-date"></div>'}}return c},secondListVL:function(a){var b="";for(var c in a){var d=a[c];if(d.length>0)for(var e=0;e<d.length;e++){var f=d[e];b+='<div class="flightline-item1-item"  id="'+f[0]+'"  onclick="FlightInfo.getThird(this)"   k="'+c+'"  at="'+f[2][1]+'" ><span class="fno">'+f[1]+"</span>",b+='<span class="dtime">'+f[2][0]+"</span>",b+='<span class="line"><em>'+f[4]+"小时"+f[5]+"分钟<br/>",b+='</em></span><span class="dtime">'+f[2][1],f[3]>0&&(b+='<i class="plus">(+'+f[3]+")</i>"),b+='</span></div><div class="flight-date" id="'+f[0]+'-date"></div>'}}return b},thirdList:function(a){for(var b="",c={1:"31",2:"28",3:"31",4:"30",5:"31",6:"30",7:"31",8:"31",9:"30",10:"31",11:"30",12:"31"},d=Object.keys(a),e=0;e<d.length;e++){var f=d[e],g=a[f],h=f.substr(4,6),i=f.substr(0,4);"0"==h.substr(0,1)&&(h=h.substr(1,1));var j=new Date(i+"/"+h+"/01"),k=j.getDay(),l=(Object.keys(g),c[h]);b+='<div class="date-table date-table-'+f,0==e&&(b+=" active"),b+='">',0!=e&&(b+='<span class="prev date-other"  key="'+d[e-1]+'"  onclick="FlightInfo.dataPicker(this)">上一月</span>'),b+='<span class="Mdate">时刻表:'+f+"</span>",e!=d.length-1&&(b+='<span class="next date-other" key="'+d[e+1]+'"  onclick="FlightInfo.dataPicker(this)">下一月</span>'),b+="<table><thead><tr><th>日</th><th>一</th><th>二</th><th>三</th><th>四</th><th>五</th><th>六</th></tr></thead><tbody>";var m=6;k<=4&&(m=5);for(var n=1;n<=m;n++){b+="<tr>";for(var o=1;o<=7;o++)i2=7*(n-1)+o-k,void 0==g[i2]?i2>=1&&i2<=l?b+='<td class="grey"><span>'+i2+"</span></td>":b+="<td><span>&nbsp;</span></td>":0==g[i2][0]?b+="<td><span>"+i2+"</span></td>":1==g[i2][0]&&(b+='<td class="has-flight"',g[i2][1]&&(b+='title="实际出发时间:'+g[i2][1]+"~实际到达时间:"+g[i2][2]+'"'),b+="><span>"+i2+"</span></td>");b+="</tr>"}b+="</tbody></table></div>"}return b},getFristConent:function(a){var b=this,c=$(a),d=c.attr("d"),e=$("#"+d).find(".flightline-itemzz2-box");if(""==e.text()){var f=c.attr("dep"),g=c.attr("arr"),h=(c.attr("stop"),{});for(var i in b.flightData)h[i]=b.flightData[i];h.dep=f,h.arr=g,h.isConnect=c.attr("c"),delete h.connect,$.ajax({type:"POST",url:baseUrl+"___api/SuXAvAQ0qWkchQuUUqHN/de1",dataType:"json",data:h,success:function(a){var a=a.data;if(0!=a.length){var b="";for(var c in a){var d=a[c],f=d.length;if(f>0)if("v_l"==c){var g=d[1],h=d[2];b+='<div><div class="name vl-route" onclick="FlightInfo.getSecond(this)"  k="'+d[0]+'" dep="'+g+'"  arr="'+h+'" stop="'+d[4]+'"><span class="code0 dep" title="'+geoCoord.name(g)+'">'+g+"</span>",b+='<span class="code0 arr" title="'+geoCoord.name(h)+'">'+h+'<i class="iconfont icon-attion" title="虚拟联程航段/经停线数据缺失的航段" ></i></span></div><div class="flightline-item1-box" id="'+d[0]+'-item1" dep="'+g+'" arr="'+h+'"></div>'}else for(var i=0;i<f;i++){var j=d[i],g=j[1],h=j[2];if("zz"==c){b+='<div><div class="name" onclick="FlightInfo.getSecondConent(this)" ><span class="code0 dep" title="'+geoCoord.name(g)+'">'+g+"</span>";var k=j[4][0];b+='<span class="code0 stop"  title="'+geoCoord.name(k)+'">'+k+"(转)</span>",b+='<span class="code0 arr" title="'+geoCoord.name(h)+'">'+h+'</span></div><div class="flightline-itemzz31-box"></div><div class="flightline-itemzz32-box"></div></div>'}else{if(b+='<div><div class="name" onclick="FlightInfo.getSecond(this)"  k="'+j[0]+'" dep="'+g+'"  arr="'+h+'" stop="'+j[4]+'"><span class="code0 dep" title="'+geoCoord.name(g)+'">'+g+"</span>","jt"==c)for(var l in j[4]){var k=j[4][l],m=geoCoord.name(k);b+='<span class="code0 stop"  title="'+m+'">'+k+"(经)</span>"}b+='<span class="code0 arr" title="'+geoCoord.name(h)+'">'+h+'</span></div><div class="flightline-item1-box" id="'+j[0]+'-item1" dep="'+g+'" arr="'+h+'"></div>'}}else e.text("nodata")}e.empty().html(b)}else e.text("nodata")}})}else e.toggle()},getSecondConent:function(a){function b(a,b){var c='<div class="flightline-itemzzlast-box"><span class="r">第'+b+"程</span>";for(var d in a){var e=a[d],f=e.length;if(f>0)if("v_l"==d){var g=e[1],h=e[2];c+='<div><div class="name vl-route" title="虚拟联程航段/经停线数据缺失的航段" onclick="FlightInfo.getSecond(this)"  k="'+e[0]+'" dep="'+g+'"  arr="'+h+'" stop="'+e[4]+'"><span class="code0 dep" title="'+geoCoord.name(g)+'">'+g+"</span>",c+='<span class="code0 arr" title="'+geoCoord.name(h)+'">'+h+'<i class="iconfont icon-attion"></i></span></div><div class="flightline-item1-box" id="'+e[0]+'-item1" dep="'+g+'" arr="'+h+'"></div>'}else for(var i=0;i<f;i++){var j=e[i],g=j[1],h=j[2];if(c+='<div class="name" onclick="FlightInfo.getSecond(this)"  k="'+j[0]+'"  dep="'+g+'" arr="'+h+'" stop="'+j[4]+'"><span class="code0 dep" title="'+geoCoord.name(g)+'">'+g+"</span>","jt"==d)for(var k in j[4]){var l=j[4][k],m=l;c+='<span class="code0 stop"  title="'+m+'">'+l+"(经)</span>"}c+='<span class="code0 arr" title="'+geoCoord.name(h)+'">'+h+'</span></div><div class="flightline-item1-box" id="'+j[0]+'-item1" dep="'+g+'" arr="'+h+'"></div>'}}return c+="</div>"}var c=this,d=$(a),e=d.parent().find(".flightline-itemzz31-box"),f=d.parent().find(".flightline-itemzz32-box"),g=d.children(".dep").text(),h=d.children(".arr").text(),i=(d.children(".stop").attr("key"),d.children(".stop").text());if(""==e.text()){var j={};for(var k in c.flightData)j[k]=c.flightData[k];j.dep=g,j.arr=i.substring(0,3),j.isConnect=0,delete j.connect,$.ajax({type:"POST",url:baseUrl+"___api/SuXAvAQ0qWkchQuUUqHN/de1",dataType:"json",data:j,success:function(a){var a=a.data;0!=a.length?e.empty().html(b(a,"一")):loading.tipAlert("暂无数据")}})}else e.toggle();if(""==f.text()){var j={};for(var k in c.flightData)j[k]=c.flightData[k];j.dep=i.substring(0,3),j.arr=h,j.isConnect=0,delete j.connect,$.ajax({type:"POST",url:baseUrl+"___api/SuXAvAQ0qWkchQuUUqHN/de1",dataType:"json",data:j,success:function(a){if(0!=a.length){var a=a.data;f.empty().html(b(a,"二"))}else f.text("nodata")}})}else f.toggle()},getRecommend:function(a){var b=$(a),c=FlightInfo,d=b.children(".recommend-route");if(b.hasClass("grey"))return!1;if(""!=$(d).text())$(d).toggle();else{var e={};for(var f in c.flightData)e[f]=c.flightData[f];e.dep=b.attr("d"),e.arr=b.attr("a"),e.type=1,e.connect=b.attr("s"),$.ajax({type:"POST",url:baseUrl+"___api/SuXAvAQ0qWkchQuUUqHN/re",dataType:"json",data:e,success:function(a){var a=a.data;if(0!=a.length){var c="",e=a[0],f=a[1],g=a[2];c+='<div class="route-total">'+e[0]+"&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;"+e[1]+" (转)&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;"+f[1]+'<i class="time">'+g[6]+"小时"+g[7]+"分</i></div> ",c+='<div class="route-one route-item"><i class="time">'+g[0]+"小时"+g[1]+'分</i><p class="date">'+e[4]+"&nbsp;&nbsp;"+e[5]+'</p><p><span class="t">'+e[6]+'</span><span class="t">'+e[0]+"</span>"+e[10]+'</p><p><span class="t">'+e[7]+'</span><span class="t">'+e[1]+"</span>"+e[2],""!=e[3]&&(c+="(执飞"+e[3]+")"),c+='</p></div><div class="route-change route-item"><span>'+f[0]+'中转</span><i class="time">'+g[2]+"小时"+g[3]+"分</i></div> ",c+='<div class="route-two route-item"><i class="time">'+g[4]+"小时"+g[5]+'分</i><p class="date">'+f[4]+"&nbsp;&nbsp;"+f[5]+'</p><p><span class="t">'+f[6]+'</span><span class="t">'+f[0]+"</span>"+f[10]+'</p><p><span class="t">'+f[7],0!=f[8]&&(c+="(+"+f[8]+")"),c+='</span><span class="t">'+f[1]+"</span>"+f[2],""!=f[3]&&(c+="(执飞"+f[3]+")"),c+="</p></div>",$(d).append(c)}else loading.tipAlert("暂无航班推荐"),b.addClass("grey")}})}}};